<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<title> Submiting your RNA-Seq data for eFP-Seq Browser</title>
<meta name="description" content="Submiting your RNA-Seq data for eFP-Seq Browser" />
<meta name="keyboard" content="eFP, RNA-Seq" />
<meta name="author" content="Alexander Sullivan" />
<link rel="stylesheet" type="text/css" href="Submission_page/style.css" />
<link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.green-pink.min.css"/>
<script src="Submission_page/processing-api.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="Submission_page/XMLgenerator-v2.js"></script>
<script src="core/custom.js"></script>

<!--Bootstrap -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- This script is to ask the user if they are sure if they want to close the submission system or not -->
<script>
window.onbeforeunload = function() { return "You are about to close the submission system. Are you sure?"}
</script>

<div>

  <!-- Titles and top buttons -->
  <header>
    <div class="leftmargin">
      <h1 style="font-weight:bold;">eFP-Seq Browser User Data Generation</h1>
      <!-- old buttons
      <div>
        <p class="leftmargin">
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect leftmargin" data-toggle="modal" data-target="#myModal" data-upgraded=",MaterialButton,MaterialRipple">Submit<span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button>
          Or, upload XMl file:
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect leftmargin" data-toggle="modal" data-target="#myModal" data-upgraded=",MaterialButton,MaterialRipple">Choose file<span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button>
        </p>
      </div>
      -->
      <p> To have your data visualized and interpretted by the eFP-Seq Browser, please fill out the form below with the information regarding your data. All forms that have an <span style="font-weight:bold;">*</span> on it are required fields to enter. </p>
      <p>  When you have finished filling in the forms, please click the "Generate Readable Data" button at the bottom of the page. It will give you an option to down an XML of readable data, it is highly recommended that you download that XML so you may simply submit that XML next time instead of needing to fill out the following form again.</p>
      <p> If you have any questions or need help, a tutorial is available by clicking on the floating "?" at the bottom right of the page. </p>
    </div>
  </header>

  <br>

  <body>

  <form>

  <!-- Submission system -->
  <div class="SubmissionArea" id="Entries_all">

  <!-- Basic information of each XML file -->
  <div class="Basic_info" name="Basic_info">
  <legend class="leftmargin" style="padding-top:2%; font-weight:bold;" id="basic_yo"> Basic Information </legend>
    <div class="form_in">
      <fieldset>
        <table class="container">
            <!-- Title of XML file -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-xml-title" title="Name/title of your generated data. For example: Analysis of 113 RNA-Seq Data collected from Experiment 3">Title <span style="font-weight:bold;">*</span></label></th>
              <input class="channelxmltitle col-sm-8 reqfield" id="reqxml" name="channelxmltitle" type="text" placeholder="Name/title of your generated data. For example: Analysis of 113 RNA-Seq Data collected from Experiment 3"  data-help-text="xmltitle" />
            </div>
            </tr>

            <!-- Author -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-author" title="The author of the generated data. Either you or your lab. Optional if you are keeping this data private.">Author <span style="font-weight:bold;">*</span></label></th>
              <input class="channelauthor col-sm-8 reqfield" id="reqauthor" name="channelauthor" type="text" placeholder="The author of the generated data. Either you or your lab. Optional if you are keeping this data private."  data-help-text="author" />
            </div>
            </tr>

            <!-- Contact info -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-contact" title="Optional: Your contact information regarding your data.">Contact info </label></th>
              <input class="channelcontact col-sm-8" name="channelcontact" type="text" placeholder="Optional: Your contact information regarding your data."  data-help-text="contact"/>
            </div>
            </tr>
        </table>
      </fieldset>
    </div>
  </div>

  <!-- Single entry for the submission -->
  <div class="Entries" name="Entries">
  <legend class="leftmargin" style="padding-top:2%; font-weight:bold;" id="Enty_num"> Entry 1 </legend>
    <div class="form_in">
      <fieldset>
        <table class="container">
            <!-- Title -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-title" title="Title of RNA-Seq coverage. For example: Aerial part of long-day-grown 4-leaf-stage seedling with mock (NaCl) treatment">Title <span style="font-weight:bold;">*</span></label></th>
              <input class="channeltitle col-sm-8 reqfield test_field" id="reqtitle" name="channeltitle" type="text" placeholder="Title of RNA-Seq coverage. For example: Aerial part of long-day-grown 4-leaf-stage seedling with mock (NaCl) treatment"  data-help-text="title" />
            </div>
            </tr>

            <!-- Description -->
            <tr>
            <div class="forminput row">
              <label for="channel-description" class="formtextarea col-sm-3" title="Description of your RNA-Seq submission data">Description <span style="font-weight:bold;">*</span></label>
              <textarea class="channeldescription col-sm-8 reqfield" id="reqdesc" name="channeldescription" type="text" placeholder="A description of your RNA-Seq data such as what it is or what it contains. This can be brief like: E-MTAB-1668:24hCS-RNA or GSM798296: mRNASeq_WT_rep2 or something long" data-help-text="description" ></textarea>
            </div>
            </tr>

            <!-- Record number -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-record_number" title="Record or run number. For example ERR274310 or SRR547531">Record number <span style="font-weight:bold;">*</span></label>
              <input class="channelrecordnumber col-sm-8 reqfield" id="req" name="channelrecordnumber" placeholder="ERR274310 or SRR547531" type="text" data-help-text="record_number" />
            </div>
            </tr>

            <!-- Hex color -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-hex_color" title="Admin use, this temp">Hex color <span style="font-weight:bold;">*</span></label>
              <input class="channelhexcolor col-sm-8 reqfield" id="req" name="channelhexcolor" placeholder="0x64cc65" type="text" data-help-text="record_number" />
            </div>


            <!-- BAM Repository link -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-bam_link" title="It is  for your your BAM files or RNA-Seq data files to have a .dl repository link for the eFP-Seq Browser to give you input.">RNA-Seq Data/BAM file Repsitory Link <span style="font-weight:bold;">*</span></label>
              <input class="channelbamlink col-sm-8 reqfield" id="req" name="channelbamlink" placeholder="This is required. Examples: http://s3.amazonaws.com/iplant-cdn/iplant/home/araport/rnaseq_bam/aerial/ERR274310/accepted_hits.bam or " type="text" data-help-text="bam_link" />
            </div>


            <!-- Publication link -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-publication_link" title="If your research has been published or referencing a research, it may be useful to link to the publication.">Publicaiton Link </label>
              <input class="channelpublicationlink col-sm-8" name="channelpublicationlink" placeholder="Optional: http://www.ebi.ac.uk/arrayexpress/experiments/E-MTAB-1668/" type="text" data-help-text="publication_link"/>
            </div>
            </tr>

            <!-- SRA Link -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-publication_url" title="If your RNA-Seq data is available on NCBI's Sequence Read Archive, it may be useful to include this informaiton.">Sequence Reach Archive/NCBI Link </label>
              <input class="channelpublicationurl col-sm-8" name="channelpublicationurl" placeholder="Optional: http://www.ncbi.nlm.nih.gov/Traces/sra/?run=ERR274310" type="text" data-help-text="publication_url"/>
            </div>
            </tr>

            <!-- Total reads mapped -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-total_reads_mapped" title="The total amount of reads mapped in your RNA-Seq data.">Total Reads Mapped <span style="font-weight:bold;">*</span></label>
              <input class="channeltotalreadsmapped col-sm-8 reqfield" id="req" name="channeltotalreadsmapped" placeholder="29098868" type="text" data-help-text="total_reads_mapped" />
            </div>
            </tr>

            <!-- SVG Name -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-svgname" title="Admin use only: SVG Name. Ex: ath-rosettePlusRoot.svg">SVG Name <span style="font-weight:bold;">*</span></label>
              <input class="channelsvgname col-sm-8 reqfield" id="req" name="channelsvgname" placeholder="Admin use only: SVG Name. Ex: ath-rosettePlusRoot.svg" type="text" data-help-text="sngname" />
            </div>
            </tr>

            <!-- Spcies -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-species" title="The species of the organism (latin name with exception of human) that your RNA-Seq data is for.">Species <span style="font-weight:bold;">*</span></label>
              <input class="channelspecies col-sm-8" list="channelspecieslist reqfield" id="req" name="channelspecies" placeholder="Arabidopsis" type="text" data-help-text="species" />
              <datalist id="channelspecieslist">
                <option value="Arabidopsis thaliana"/>
                <option value="Selaginella moellendorffi"/>
                <option value="Brachypodium distachyon"/>
                <option value="Setaria viridis"/>
                <option value="Lotus japonicus"/>
                <option value="Maize"/>
                <option value="Nicotiana benthamiana"/>
                <option value="Oryza sativa"/>
                <option value="Caenorhabditis elegans"/>
                <option value="Saccharomyces cerevisiae"/>
                <option value="Tobacco mosaic virus"/>
                <option value="Escherichia coli"/>
                <option value="Bacillus subtilis"/>
                <option value="Pseudomonas fluorescens"/>
                <option value="Human"/>
                <option value="Mus muculus"/>
              </datalist>
            </div>
            </tr>

            <!-- Tissue -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-tissue" title="The tissue the RNA-Seq data is from.">Tissue <span style="font-weight:bold;">*</span></label>
              <input class="channeltissue col-sm-8" list="channeltissuelist reqfield" id="req" name="channeltissue" placeholder="Etiolated seedling" type="text" data-help-text="tissue" />
              <datalist id="channeltissuelist">
                <option value="Dry seed"/>
                <option value="Imbibed seed, 24 h"/>
                <option value="1st Node"/>
                <option value="Flower Stage 12, Stamens"/>
                <option value="Cauline Leaf"/>
                <option value="Cotyledon"/>
                <option value="Root"/>
                <option value="Entire Rosette After Transition to Flowering"/>
                <option value="Flower Stage 9"/>
                <option value="Flower Stage 10/11"/>
                <option value="Flower Stage 12"/>
                <option value="Flower Stage 15"/>
                <option value="Flower Stage 12, Carpels"/>
                <option value="Flower Stage 15, Carpels"/>
                <option value="Flower Stage 12, Petals"/>
                <option value="Flower Stage 15, Petals"/>
                <option value="Flower Stage 12, Sepals"/>
                <option value="Flower Stage 15, Sepals"/>
                <option value="Flowers Stage 15, Pedicels"/>
                <option value="Leaf 1 + 2"/>
                <option value="Leaf 7, Petiole"/>
                <option value="Leaf 7, Distal Half"/>
                <option value="Leaf 7, Proximal Half"/>
                <option value="Hypocotyl"/>
                <option value="Root"/>
                <option value="Rosette Leaf 2"/>
                <option value="Rosette Leaf 4"/>
                <option value="Rosette Leaf 6"/>
                <option value="Rosette Leaf 8"/>
                <option value="Rosette Leaf 10"/>
                <option value="Rosette Leaf 12"/>
                <option value="Senescing Leaf"/>
                <option value="Shoot Apex, Inflorescence"/>
                <option value="Shoot Apex, Transition"/>
                <option value="Shoot Apex, Vegetative"/>
                <option value="Stem, 2nd Internode"/>
                <option value="Mature Pollen"/>
                <option value="Seeds Stage 3 w/ Siliques"/>
                <option value="Seeds Stage 4 w/ Siliques"/>
                <option value="Seeds Stage 5 w/ Siliques"/>
                <option value="Seeds Stage 6 w/o Siliques"/>
                <option value="Seeds Stage 7 w/o Siliques"/>
                <option value="Seeds Stage 8 w/o Siliques"/>
                <option value="Seeds Stage 9 w/o Siliques"/>
                <option value="Seeds Stage 10 w/o Siliques"/>
                <option value="Vegetative Rosette"/>
                <option value="Other"/>
              </datalist>
            </div>
            </tr>

            <!-- Control -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3" for="channel-controls" title="The BAM exp number of the controls in your RNA-Seq data.">Controls </label>
              <input class="channelcontrols col-sm-8" name="channelcontrols" placeholder="Optional: ERR274310" type="text" data-help-text="total_controls"/>
            </div>
            </tr>

            <!-- Replicate control 1 -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3 " for="channel-groupwidtho" title="The BAM exp number of the replicate controls in your RNA-Seq data.">&nbsp;&nbsp;&nbsp;<img class="scalearrow" src=" Submission_page/Images/arrow_taken-from-google.png"> Replicate Controls 1 </label>
              <input class="channelgroupwidtho col-sm-8" name="channelgroupwidtho" placeholder="Optional: ERR274308, ERR274309, ERR274310, ERR274311" type="text" data-help-text="groupwidth"/>
            </div>
            </tr>

            <!-- Replicate control 2 -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3 " for="channel-groupwidth2" title="The BAM exp number of the replicate controls in your RNA-Seq data.">&nbsp;&nbsp;&nbsp;<img class="scalearrow" src=" Submission_page/Images/arrow_taken-from-google.png"> Replicate Controls 2 </label>
              <input class="channelgroupwidth2 col-sm-8" name="channelgroupwidth2" placeholder="Optional: ERR274308, ERR274309, ERR274310, ERR274311" type="text" data-help-text="groupwidth"/>
            </div>
            </tr>

            <!-- Replicate control 3 -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3 " for="channel-groupwidth3" title="The BAM exp number of the replicate controls in your RNA-Seq data.">&nbsp;&nbsp;&nbsp;<img class="scalearrow" src=" Submission_page/Images/arrow_taken-from-google.png"> Replicate Controls 3 </label>
              <input class="channelgroupwidth3 col-sm-8" name="channelgroupwidth3" placeholder="Optional: ERR274308, ERR274309, ERR274310, ERR274311" type="text" data-help-text="groupwidth"/>
            </div>
            </tr>

            <!-- Replicate control 4 -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3 " for="channel-groupwidth4" title="The BAM exp number of the replicate controls in your RNA-Seq data.">&nbsp;&nbsp;&nbsp;<img class="scalearrow" src=" Submission_page/Images/arrow_taken-from-google.png"> Replicate Controls 4 </label>
              <input class="channelgroupwidth4 col-sm-8" name="channelgroupwidth4" placeholder="Optional: ERR274308, ERR274309, ERR274310, ERR274311" type="text" data-help-text="groupwidth"/>
            </div>
            </tr>

            <!-- Replicate control 5 -->
            <tr>
            <div class="forminput row">
              <label class="col-sm-3 " for="channel-groupwidth5" title="The BAM exp number of the replicate controls in your RNA-Seq data.">&nbsp;&nbsp;&nbsp;<img class="scalearrow" src=" Submission_page/Images/arrow_taken-from-google.png"> Replicate Controls 5 </label>
              <input class="channelgroupwidth5 col-sm-8" name="channelgroupwidth5" placeholder="Optional: ERR274308, ERR274309, ERR274310, ERR274311" type="text" data-help-text="groupwidth"/>
            </div>
            </tr>
        </table>
  	  </fieldset>
  	</div>
  </div>

  </div>


  <!-- Add another entry and generate XML buttons -->
  <div id="Cloning" class="button_fixed">
    <p> All field entries with a * next to them are required entries </p>
    <p>
  	   <button type="button" id="CloneForm" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect leftmargin" data-upgraded=",MaterialButton,MaterialRipple">Add another entry<span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button>

       <button type="button" id="SubmitButton" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect leftmargin" data-upgraded=",MaterialButton,MaterialRipple" style="margin-left:10px;">Generate Readable Data<span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button>

       <span id="not_filled" style="margin-left:10px;"></span>
    </p>
  </div>

  <!-- Generate XML download -->
  <div id="generated" style="display:none" class="leftmargin">
    <p style="font-size:2em;">Please download the following XML to use your data at a later point without the necessicity of filling in the form again. Click the submit button and add in the following XML.</p>

    <button type="button" href="#" id="DownloadLink" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect leftmargin" data-upgraded=",MaterialButton,MaterialRipple">Download Readable Data (XML)<span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button>

    <button type="button" class="create_button mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect leftmargin" data-upgraded=",MaterialButton,MaterialRipple" onclick="document.getElementById('fileID').click();" style="margin-left:10px;">Submit<span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button>
    <input type="file" id="fileID" hidden accept="text/xml"/>

    <!-- Script for changing base_src and uploading XML, clienside -->
    <script>
    $(function() {
      $("#fileID").on('change', function() {
        //Get count of selected files
        var countFiles = $(this)[0].files.length;
        var imgPath = $(this)[0].value;
        var extn = imgPath.substring(imgPath.lastIndexOf('.') + 1).toLowerCase();
        var hold_xml = $("#hold-xml");
        hold_xml.empty();
        if (extn == "xml") {
          if (typeof(FileReader) != "undefined") {
            //loop for each file selected for uploaded.
            for (var i = 0; i < countFiles; i++) {
              var reader = new FileReader();

              reader.onload = function(e) {
                //var data = e.target.result;
                //window.alert(data);
                $("<div />", {
                  "src": e.target.result,
                  "id": "newsrc"
                }).appendTo(window.parent.document.getElementById("hold-xml"));

                parent.base_src = window.parent.document.getElementById("newsrc").getAttribute("src");
                //window.open(base_src);
              }
              hold_xml.show();
              reader.readAsDataURL($(this)[0].files[i]);
              parent.update_all_images(0);
              parent.closeGenerate();
            }
          } else {
            alert("This browser does not support FileReader. Please use an updated version of Internet Explorer, Google Chrome, Mozilla Firefox, that Apple one and the other one");
          }
        } else {
          alert("Insert valid XML only");
        }
        //count_bam_num();
      });
    });
    </script>

    <div id="iframe_hold-xml"></div>

  </div>

  </form>
  </body>

<!-- Back to welcome page

<div class="leftmargin return" style="padding-top:50px;" id="return">
  <a href="Opening_Submission.html"><button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect leftmargin" data-upgraded=",MaterialButton,MaterialRipple"> Return to welcome back <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button></a>
</div>

-->

<!-- Floating help button -->
<a href="Tutorial-Help.html"><img src="Submission_page/Images/help2.png" style="position: fixed; bottom: 10px; right: 10px;" height="40" title="Tutorial on how the submission system works for the eFP-Seq Browser and what to put in each input field (including how to find it)."></a>
<p id="float_test" style="position: fixed; bottom: 10px; right: 100px; font-weight:bold; " hidden>Testing</p>
</html>
